<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Stream with Fallback</title>
</head>
<body style="
    display: flex;
    justify-content: center;
    align-items: center;
    margin: auto 0;
    margin-top: 20%;
">
    <audio id="audioPlayer" controls>
        Your browser does not support the audio element.
    </audio>
    <script>
        const liveStreamURL = 'https://s48.radiolize.com/radio/8050/radio.mp3'; // Replace with your live stream URL
        const fallbackMP3 = '/AEROSUR1.mp3'; // Replace with your fallback MP3 file path

        const audioPlayer = document.getElementById('audioPlayer');

        function playLiveStream() {
            audioPlayer.src = liveStreamURL;
            audioPlayer.play().catch((err) => {
                console.error('Failed to play live stream:', err);
                playFallback();
            });
        }

        function playFallback() {
            audioPlayer.src = fallbackMP3;
            audioPlayer.play().catch((err) => {
                console.error('Failed to play fallback MP3:', err);
            });
        }

        function updatePlayback() {
            if (navigator.onLine) {
                playLiveStream();
            } else {
                playFallback();
            }
        }

        window.addEventListener('online', () => {
            updatePlayback();
        });

        window.addEventListener('offline', () => {
            updatePlayback();
        });

        audioPlayer.addEventListener('error', () => {
            if (navigator.onLine) {
                playFallback();
            }
        });

        // Check the connection and play the appropriate audio source
        fetch(liveStreamURL, { method: 'HEAD' })
            .then((response) => {
                if (response.ok) {
                    playLiveStream();
                } else {
                    playFallback();
                }
            })
            .catch(() => {
                playFallback();
            });
    </script>
</body>
</html>
