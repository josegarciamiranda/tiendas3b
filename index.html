<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reproductor de Audio Continuo</title>
</head>
<body>

<audio id="audioPlayer" autoplay></audio>

<script>
    const streamingURL = "https://c26.radioboss.fm:8581/stream";
    const localAudio = "AEROSUR1.mp3";
    const audioPlayer = document.getElementById("audioPlayer");

    function playStream() {
        audioPlayer.src = streamingURL;
        audioPlayer.play().catch(() => playLocal()); // En caso de error, pasa al archivo local
    }

    function playLocal() {
        audioPlayer.src = localAudio;
        audioPlayer.play().catch(() => setTimeout(playStream, 5000)); // Intenta de nuevo en 5 segundos
    }

    audioPlayer.addEventListener("error", () => {
        // Si hay un error, intenta con el archivo local
        playLocal();
    });

    audioPlayer.addEventListener("playing", () => {
        // Verifica cada 5 segundos si la conexi칩n de streaming se ha restaurado
        setInterval(() => {
            fetch(streamingURL, { method: 'HEAD', mode: 'no-cors' })
                .then(response => {
                    if (response.ok || response.status === 200) {
                        // Cambia al streaming si est치 disponible
                        if (audioPlayer.src !== streamingURL) {
                            playStream();
                        }
                    }
                })
                .catch(() => {
                    // Si no hay conexi칩n, sigue con el archivo local
                    if (audioPlayer.src !== localAudio) {
                        playLocal();
                    }
                });
        }, 5000);
    });

    // Inicia el streaming al cargar la p치gina
    playStream();
</script>

</body>
</html>
