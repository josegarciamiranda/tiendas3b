<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reproductor de Audio Continuo</title>
</head>
<body>

<audio id="audioPlayer" controls autoplay></audio>

<script>
    const streamingURL = "https://c26.radioboss.fm:8581/stream";
    const localAudio = "AEROSUR1.mp3";
    const audioPlayer = document.getElementById("audioPlayer");
    let isTryingToStream = true;

    function playStream() {
        isTryingToStream = true;
        audioPlayer.src = streamingURL;
        audioPlayer.play().catch(() => {
            isTryingToStream = false;
            playLocal();
        });
    }

    function playLocal() {
        isTryingToStream = false;
        audioPlayer.src = localAudio;
        audioPlayer.play().catch(() => {
            console.error("Error al reproducir el archivo local");
        });
    }

    function checkStreamingStatus() {
        fetch(streamingURL, { method: 'HEAD', mode: 'no-cors' })
            .then(() => {
                if (!isTryingToStream) {
                    playStream();
                }
            })
            .catch(() => {
                if (isTryingToStream) {
                    playLocal();
                }
            });
    }

    audioPlayer.addEventListener("error", () => {
        if (isTryingToStream) {
            playLocal();
        }
    });

    setInterval(checkStreamingStatus, 5000); // Verificar la conexión al streaming cada 5 segundos

    // Inicia el streaming al cargar la página
    playStream();
</script>

</body>
</html>
